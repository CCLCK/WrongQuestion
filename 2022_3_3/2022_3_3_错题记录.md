[toc]



## ğŸ¥deleteå’Œdelete[]çš„åŒºåˆ«ï¼Ÿ



![image-20220303225302754](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220303225302754.png)



```c++
//ä»£ç demo
#include<iostream>
using namespace std;
class ClassA
{
public:
	ClassA()
	{
		cout << "ClassA()" << endl;
	}
	~ClassA()
	{
		cout << "~ClassA()" << endl;
	}
};
int main()
{
	ClassA* pclassA = new ClassA[5];
	cout << sizeof(ClassA) << endl;
	delete pclassA;
	/*delete[] pclassA;*/
	return 0;
}
```

è¿™æ®µä»£ç å…¶å®æ˜¯ç”±é—®é¢˜çš„ï¼Œnewçš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè‡ªç„¶å¾—ç”¨delete[]é…å¯¹

é¢˜ç›®ç°åœ¨å°±æ˜¯é—®deleteï¼Œè€Œä¸æ˜¯delete[]

é¢˜ç›®å°±è½¬å˜æˆäº†**åœ¨éœ€è¦ä½¿ç”¨delete[]çš„æ—¶å€™ä½¿ç”¨äº†deleteçš„åæœ**

å…ˆè¯´ç»“è®ºï¼švs2013æ£€æŸ¥å†…å­˜ï¼Œç¨‹åºå´©æºƒ

åŸå› ï¼šdeleteå¯ä»¥ç†è§£ä¸ºå¯¹freeçš„å°è£…ï¼Œdelete pclassAå¯ä»¥é‡Šæ”¾newå‡ºæ¥çš„ç©ºé—´ï¼Œä½†æ˜¯åªä¼šè°ƒç”¨ä¸€æ¬¡ææ„å‡½æ•°ï¼ˆpclassA[0]è°ƒç”¨çš„ï¼‰ï¼Œåˆå› ä¸º**åœ¨ç±»é‡Œé¢å¼€è¾Ÿçš„ç©ºé—´éœ€è¦é€šè¿‡ææ„å‡½æ•°é‡Šæ”¾**ï¼Œè¿™é‡Œnewäº†äº”ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯åªæœ‰ä¸€ä¸ªå¯¹è±¡çš„èµ„æºè¢«é‡Šæ”¾ï¼Œå…¶ä½™å››ä¸ªå¯¹è±¡çš„èµ„æºæœªè¢«é‡Šæ”¾ï¼Œvsç¼–è¯‘å™¨æ£€æŸ¥åˆ°äº†è¿™å—é”™è¯¯ï¼Œç¨‹åºå´©æºƒ.

æ­£ç¡®ä½¿ç”¨ï¼šdelete[] pclassA;è¿™æ ·å°±ä¼šè°ƒç”¨äº”æ¬¡ææ„å‡½æ•°é‡Šæ”¾èµ„æº.

![image-20220303231542943](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220303231542943.png)



é™„åŠ çŸ¥è¯†ç‚¹ï¼š

æ„é€ å’Œææ„å‡½æ•°ä¾ç„¶å¾—æŠŠæƒé™è®¾ç½®ä¸ºpublicï¼Œæ‰å¯ä»¥åœ¨ç±»å¤–è®¿é—®åˆ°

![image-20220303225602409](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220303225602409.png)



## ğŸ¥é‡è½½å‰ç½®++å’Œåç½®++æ—¶çš„åŒºåˆ«

![image-20220303232003227](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220303232003227.png)

é‡è½½å‰ç½®++çš„å‡½æ•°æ²¡æœ‰å‚æ•°ï¼Œåç½®++æœ‰ä¸€ä¸ªå‚æ•°

```c++
operator++(int)//åç½®++
operator++()//å‰ç½®++
```

## ğŸ¥åªé€šè¿‡newæ¥åˆ›å»ºå¯¹è±¡

![image-20220303232726319](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220303232726319.png)

```c++
#include<iostream>
using namespace std;
class A
{
public:
	A()
	{
		cout << "A()" << endl;
	}
private:
	~A()
	{
		cout << "~A()" << endl;
	}
};
int main()
{
	A* a = new A;
	//A a;
	return 0;
}
```

![image-20220303233011163](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220303233011163.png)

## ğŸ¥ä¸€å®šè¦é€šè¿‡åˆå§‹åŒ–åˆ—è¡¨åˆå§‹åŒ–çš„æˆå‘˜å˜é‡

ç»“è®ºï¼šè¢«constä¿®é¥°ä½†ä¸è¢«staticä¿®é¥°çš„æˆå‘˜å˜é‡ï¼Œå¼•ç”¨

> å¤‡æ³¨ï¼šC++æœ‰ä¸ªè¡¥ä¸ï¼Œå¯ä»¥ç»™æˆå‘˜å˜é‡èµ‹ä¸€ä¸ªé»˜è®¤å€¼ï¼Œä¸Šé¢ç»“è®ºçš„å‰ææ—¶éƒ½æ²¡ç»™é»˜è®¤å€¼ï¼ˆç¼ºçœå€¼ï¼‰
>
> ![image-20220303234209156](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220303234209156.png)

é”™é¢˜ï¼š

![image-20220303234356886](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220303234356886.png)



```c++
const int b;//constä¿®é¥°ä¸”æ²¡è¢«staticä¿®é¥°ï¼Œå¿…é¡»åˆå§‹åŒ–
float* &c;//å¼•ç”¨ï¼Œå¿…é¡»åˆå§‹åŒ–
static const char*d;//è¢«constå’Œstaticä¿®é¥°ï¼Œä¸å¿…é¡»åˆå§‹åŒ–
static double* e;//staticä¿®é¥°ï¼Œä¸å¿…é¡»åˆå§‹åŒ–
ï¼ï¼æ‰€ä»¥é€‰B    
```

ä¸ºä»€ä¹ˆè¢«staticä¿®é¥°çš„å˜é‡ä¸å¿…é¡»åˆå§‹åŒ–ï¼Œstaticæ˜¯å±äºç±»çš„ï¼Œè€Œä¸æ˜¯å±äºæŸä¸ªå¯¹è±¡çš„ï¼Œæˆ‘ä»¬ä»€ä¹ˆæ—¶å€™ä¼šä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨ï¼Ÿå½“ç„¶æ˜¯æ„é€ å¯¹è±¡æ—¶ï¼Œå› ä¸ºæ­¤æ—¶ä¼šè°ƒç”¨æ„é€ å‡½æ•°ï¼Œæ—¢ç„¶staticä¿®é¥°çš„å˜é‡éƒ½ä¸å±äºè¿™ä¸ªå¯¹è±¡è‡ªç„¶ä¸éœ€è¦åˆå§‹åŒ–åˆ—è¡¨ã€‚

ç®€è€Œè¨€ä¹‹ï¼Œåˆå§‹åŒ–åˆ—è¡¨æ˜¯ä¸ºäº†å¯¹è±¡çš„æˆå‘˜å˜é‡å‡†å¤‡çš„ï¼ˆè¿™é‡Œä¸ç‰µæ‰¯ç»§æ‰¿çš„çŸ¥è¯†ï¼‰

## ğŸ¥å‹å…ƒå‡½æ•°å‚æ•°åˆ—è¡¨æ²¡æœ‰thisæŒ‡é’ˆ

![image-20220304000939385](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220304000939385.png)

å‹å…ƒå‡½æ•°ä¸æ˜¯ç±»çš„æˆå‘˜ï¼Œæ‰€ä»¥è‡ªç„¶æ˜¯æ²¡æœ‰thisæŒ‡é’ˆçš„

## ğŸ¥å‹å…ƒå‡½æ•°é‡è½½è¿ç®—ç¬¦

![image-20220304002750698](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220304002750698.png)

C++å‹å…ƒå‡½æ•°é‡è½½è¿ç®—ç¬¦è‡³å°‘æœ‰ä¸€ä¸ªå‚æ•°ï¼Œä¸€ç›®è¿ç®—ç¬¦ä¸€ä¸ªå‚æ•°ï¼ŒäºŒç›®è¿ç®—ç¬¦ä¸¤ä¸ªå‚æ•°

é‚£ä¸ºä»€ä¹ˆåœ¨ç±»å†…é‡è½½å‰ç½®++æ²¡æœ‰å‚æ•°å‘¢ï¼Ÿ

åŸå› ï¼šæˆå‘˜å‡½æ•°éƒ½æœ‰ä¸ªéšå¼å‚æ•°thisæŒ‡é’ˆï¼ŒæŒ‡å‘å½“å‰å‚æ•°

## ğŸ¥deleteè°ƒç”¨ææ„å‡½æ•°

![image-20220304003058602](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220304003058602.png)

deleteä¼šè°ƒç”¨ææ„å‡½æ•°ï¼Œå› ä¸ºå®ƒç›´æ¥é‡Šæ”¾äº†å¯¹è±¡çš„è¿™å—ç©ºé—´ï¼Œç»“æŸäº†å…¶ç”Ÿå‘½å‘¨æœŸï¼ˆå¤§æ„äº†å±äºæ˜¯ï¼‰

